<script>
logger_output = "";
function logger() {
    let textarea_debug = document.getElementById("debug");
    logger_output += e.toString() + "\n";
    textarea_debug.value = logger_output;
}
function execute() {
    try {
    let textarea_code = document.getElementById("code");
    let textarea_input = document.getElementById("input");
    let textarea_output = document.getElementById("output");
    let textarea_expression = document.getElementById("expression");
    let network = eval("(function() { return " + textarea_code.value + "})()").finalize();
    textarea_output.value = network.activate(textarea_input.value);
    textarea_expression.value = network.to_expression();
    } catch(e) {
    let textarea_debug = document.getElementById("debug");
    textarea_debug.value = e.toString();
    }
}
function learn() {
    try {
    let textarea_code = document.getElementById("code");
    let textarea_input = document.getElementById("input");
    let textarea_output = document.getElementById("output");
    let textarea_expected = document.getElementById("expected");
    let textarea_expression = document.getElementById("expression");
    let network = eval("(function() { return " + textarea_code.value + "})()").finalize();
    textarea_output.value = network.feedforward(textarea_input.value);
    network.backpropagation(textarea_expected.value, textarea_output.value);
    textarea_expression.value = network.to_expression();
    } catch(e) {
    let textarea_debug = document.getElementById("debug");
    textarea_debug.value = e.toString();
    }
}
</script>

<div>
<script src="../src/js/detail/matrix.js"></script>
<script src="../src/js/detail/neural.js"></script>
<script src="../src/js/detail/expression.js"></script>
<script src="../src/js/nerve.js"></script>

<textarea rows="10" cols="30" id="code">expression.network(2,expression.layers(expression.layer(2,2,1,1,1,1,0,0),expression.layer(4,2,1,1,1,1,1,1,1,1,0,0,0,0)),expression.collectors(expression.collector("ab"),expression.collector("ba")),1)</textarea>
<button onclick="execute()">RUN</button>
<textarea rows="1" cols="30" id="output"></textarea>
<textarea rows="1" cols="30" id="input"></textarea>
<textarea rows="10" cols="30" id="expression"></textarea>
<button onclick="learn()">LEARN</button>
<textarea rows="1" cols="30" id="expected"></textarea>
</div>
<div>
<textarea rows="10" cols="50" id="debug"></textarea>
</div>
